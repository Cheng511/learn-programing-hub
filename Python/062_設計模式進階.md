[ä¸Šä¸€ç« ï¼šè¨­è¨ˆæ¨¡å¼åŸºç¤](061_è¨­è¨ˆæ¨¡å¼åŸºç¤.md) | [ä¸‹ä¸€ç« ï¼šå‡½æ•¸å¼ç·¨ç¨‹](063_å‡½æ•¸å¼ç·¨ç¨‹.md)

# Python è¨­è¨ˆæ¨¡å¼é€²éš ğŸ°

## é€²éšå‰µå»ºå‹æ¨¡å¼

### 1. æŠ½è±¡å·¥å» æ¨¡å¼

```python
from abc import ABC, abstractmethod

# æŠ½è±¡ç”¢å“
class Button(ABC):
    @abstractmethod
    def paint(self):
        pass

class Checkbox(ABC):
    @abstractmethod
    def paint(self):
        pass

# å…·é«”ç”¢å“
class WinButton(Button):
    def paint(self):
        return "Windows button"

class MacButton(Button):
    def paint(self):
        return "macOS button"

class WinCheckbox(Checkbox):
    def paint(self):
        return "Windows checkbox"

class MacCheckbox(Checkbox):
    def paint(self):
        return "macOS checkbox"

# æŠ½è±¡å·¥å» 
class GUIFactory(ABC):
    @abstractmethod
    def create_button(self) -> Button:
        pass
    
    @abstractmethod
    def create_checkbox(self) -> Checkbox:
        pass

# å…·é«”å·¥å» 
class WinFactory(GUIFactory):
    def create_button(self) -> Button:
        return WinButton()
    
    def create_checkbox(self) -> Checkbox:
        return WinCheckbox()

class MacFactory(GUIFactory):
    def create_button(self) -> Button:
        return MacButton()
    
    def create_checkbox(self) -> Checkbox:
        return MacCheckbox()

# å®¢æˆ¶ç«¯ä»£ç¢¼
def create_gui(factory: GUIFactory):
    button = factory.create_button()
    checkbox = factory.create_checkbox()
    return button.paint(), checkbox.paint()

# ä½¿ç”¨ç¤ºä¾‹
win_factory = WinFactory()
mac_factory = MacFactory()

print(create_gui(win_factory))
print(create_gui(mac_factory))
```

### 2. åŸå‹æ¨¡å¼

```python
from copy import deepcopy

class Prototype:
    def __init__(self):
        self._objects = {}
    
    def register_object(self, name, obj):
        self._objects[name] = obj
    
    def unregister_object(self, name):
        del self._objects[name]
    
    def clone(self, name, **attrs):
        obj = deepcopy(self._objects.get(name))
        obj.__dict__.update(attrs)
        return obj

# å…·é«”åŸå‹
class Document:
    def __init__(self, name, content):
        self.name = name
        self.content = content
    
    def __str__(self):
        return f"Document(name={self.name}, content={self.content})"

# ä½¿ç”¨ç¤ºä¾‹
prototype = Prototype()
doc = Document("original", "This is a document")
prototype.register_object("doc", doc)

doc_clone = prototype.clone("doc", name="clone")
print(doc)
print(doc_clone)
```

## é€²éšçµæ§‹å‹æ¨¡å¼

### 1. æ©‹æ¥æ¨¡å¼

```python
from abc import ABC, abstractmethod

# å¯¦ç¾éƒ¨åˆ†
class DrawAPI(ABC):
    @abstractmethod
    def draw_circle(self, x, y, radius):
        pass

class DrawAPIOne(DrawAPI):
    def draw_circle(self, x, y, radius):
        return f"API 1 drawing circle at ({x}, {y}) with radius {radius}"

class DrawAPITwo(DrawAPI):
    def draw_circle(self, x, y, radius):
        return f"API 2 drawing circle at ({x}, {y}) with radius {radius}"

# æŠ½è±¡éƒ¨åˆ†
class Shape(ABC):
    def __init__(self, draw_api):
        self.draw_api = draw_api
    
    @abstractmethod
    def draw(self):
        pass

class Circle(Shape):
    def __init__(self, x, y, radius, draw_api):
        super().__init__(draw_api)
        self.x = x
        self.y = y
        self.radius = radius
    
    def draw(self):
        return self.draw_api.draw_circle(self.x, self.y, self.radius)

# ä½¿ç”¨ç¤ºä¾‹
api1 = DrawAPIOne()
api2 = DrawAPITwo()

circle1 = Circle(1, 2, 3, api1)
circle2 = Circle(4, 5, 6, api2)

print(circle1.draw())
print(circle2.draw())
```

### 2. çµ„åˆæ¨¡å¼

```python
from abc import ABC, abstractmethod

class Component(ABC):
    @abstractmethod
    def operation(self):
        pass

class Leaf(Component):
    def __init__(self, name):
        self.name = name
    
    def operation(self):
        return f"Leaf {self.name}"

class Composite(Component):
    def __init__(self, name):
        self.name = name
        self.children = []
    
    def add(self, component):
        self.children.append(component)
    
    def remove(self, component):
        self.children.remove(component)
    
    def operation(self):
        results = [f"Composite {self.name}"]
        for child in self.children:
            results.append(f"  {child.operation()}")
        return "\n".join(results)

# ä½¿ç”¨ç¤ºä¾‹
root = Composite("root")
branch1 = Composite("branch1")
branch2 = Composite("branch2")
leaf1 = Leaf("leaf1")
leaf2 = Leaf("leaf2")
leaf3 = Leaf("leaf3")

root.add(branch1)
root.add(branch2)
branch1.add(leaf1)
branch1.add(leaf2)
branch2.add(leaf3)

print(root.operation())
```

## é€²éšè¡Œç‚ºå‹æ¨¡å¼

### 1. å‘½ä»¤æ¨¡å¼

```python
from abc import ABC, abstractmethod
from typing import List

# å‘½ä»¤æ¥å£
class Command(ABC):
    @abstractmethod
    def execute(self):
        pass
    
    @abstractmethod
    def undo(self):
        pass

# å…·é«”å‘½ä»¤
class TextEditorCommand(Command):
    def __init__(self, document, text):
        self.document = document
        self.text = text
        self.backup = None
    
    def backup(self):
        self.backup = self.document.text
    
    def undo(self):
        self.document.text = self.backup

class AddTextCommand(TextEditorCommand):
    def execute(self):
        self.backup()
        self.document.text += self.text

class DeleteTextCommand(TextEditorCommand):
    def execute(self):
        self.backup()
        self.document.text = self.document.text[:-len(self.text)]

# æ¥æ”¶è€…
class Document:
    def __init__(self):
        self.text = ""
    
    def __str__(self):
        return self.text

# èª¿ç”¨è€…
class TextEditor:
    def __init__(self):
        self.history: List[Command] = []
    
    def execute(self, command: Command):
        command.execute()
        self.history.append(command)
    
    def undo(self):
        if self.history:
            command = self.history.pop()
            command.undo()

# ä½¿ç”¨ç¤ºä¾‹
document = Document()
editor = TextEditor()

editor.execute(AddTextCommand(document, "Hello, "))
editor.execute(AddTextCommand(document, "World!"))
print(document)  # Hello, World!

editor.undo()
print(document)  # Hello, 
```

### 2. ç‹€æ…‹æ¨¡å¼

```python
from abc import ABC, abstractmethod

# ç‹€æ…‹æ¥å£
class State(ABC):
    @abstractmethod
    def handle(self):
        pass

# å…·é«”ç‹€æ…‹
class ConcreteStateA(State):
    def handle(self):
        return "State A handling"

class ConcreteStateB(State):
    def handle(self):
        return "State B handling"

# ä¸Šä¸‹æ–‡
class Context:
    def __init__(self, state: State):
        self._state = state
    
    @property
    def state(self):
        return self._state
    
    @state.setter
    def state(self, state: State):
        self._state = state
    
    def request(self):
        return self._state.handle()

# ä½¿ç”¨ç¤ºä¾‹
context = Context(ConcreteStateA())
print(context.request())

context.state = ConcreteStateB()
print(context.request())
```

## ç·´ç¿’é¡Œ

1. **å¯¦ç¾æŠ½è±¡å·¥å» æ¨¡å¼**
   è¨­è¨ˆä¸€å€‹è·¨å¹³å°UIæ¡†æ¶ï¼š
   - æ”¯æŒå¤šå€‹æ“ä½œç³»çµ±
   - å¯¦ç¾ä¸åŒé¢¨æ ¼çš„æ§ä»¶
   - ä¿æŒä¸€è‡´çš„æ¥å£
   - æ”¯æŒä¸»é¡Œåˆ‡æ›

2. **å¯¦ç¾å‘½ä»¤æ¨¡å¼**
   é–‹ç™¼ä¸€å€‹æ–‡æœ¬ç·¨è¼¯å™¨ï¼š
   - å¯¦ç¾æ’¤éŠ·/é‡åšåŠŸèƒ½
   - æ”¯æŒå¤šç¨®ç·¨è¼¯æ“ä½œ
   - ä¿å­˜æ“ä½œæ­·å²
   - å¯¦ç¾å®å‘½ä»¤

3. **å¯¦ç¾ç‹€æ…‹æ¨¡å¼**
   å‰µå»ºä¸€å€‹è¨‚å–®ç³»çµ±ï¼š
   - å®šç¾©å¤šå€‹è¨‚å–®ç‹€æ…‹
   - å¯¦ç¾ç‹€æ…‹è½‰æ›
   - è™•ç†ç‹€æ…‹ç›¸é—œè¡Œç‚º
   - ç¶­è­·ç‹€æ…‹æ­·å²

## å°æé†’ ğŸ’¡

1. æ¨¡å¼çµ„åˆ
   - éˆæ´»çµ„åˆå¤šå€‹æ¨¡å¼
   - é¿å…éåº¦è¤‡é›œ
   - ä¿æŒä»£ç¢¼æ¸…æ™°
   - æ³¨æ„æ¨¡å¼é–“çš„é—œä¿‚

2. è¨­è¨ˆåŸå‰‡
   - é–‹é–‰åŸå‰‡
   - å–®ä¸€è·è²¬
   - ä¾è³´å€’ç½®
   - æ¥å£éš”é›¢

3. æ€§èƒ½è€ƒæ…®
   - è©•ä¼°æ€§èƒ½å½±éŸ¿
   - å„ªåŒ–é—œéµéƒ¨åˆ†
   - é¿å…éåº¦æŠ½è±¡
   - æ¬Šè¡¡è¨­è¨ˆå’Œæ•ˆç‡

4. å¯¦è¸å»ºè­°
   - å…ˆç†è§£æ¥­å‹™éœ€æ±‚
   - é¸æ“‡åˆé©çš„æ¨¡å¼
   - ä¿æŒä»£ç¢¼ç°¡æ½”
   - æ³¨é‡å¯ç¶­è­·æ€§

[ä¸Šä¸€ç« ï¼šè¨­è¨ˆæ¨¡å¼åŸºç¤](061_è¨­è¨ˆæ¨¡å¼åŸºç¤.md) | [ä¸‹ä¸€ç« ï¼šå‡½æ•¸å¼ç·¨ç¨‹](063_å‡½æ•¸å¼ç·¨ç¨‹.md) 