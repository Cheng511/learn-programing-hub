[ä¸Šä¸€ç« ï¼šæ©Ÿå™¨äººé€²éš](105_æ©Ÿå™¨äººé€²éš.md) | [ä¸‹ä¸€ç« ï¼šéŠæˆ²é–‹ç™¼é€²éš](107_éŠæˆ²é–‹ç™¼é€²éš.md)

# Python éŠæˆ²é–‹ç™¼åŸºç¤ ğŸ®

## éŠæˆ²é–‹ç™¼åŸºç¤

### 1. éŠæˆ²çª—å£

```python
import pygame
import sys
import os
from typing import Tuple, List, Optional, Dict
import time

class GameWindow:
    def __init__(self, width: int = 800, height: int = 600, title: str = "Game"):
        """åˆå§‹åŒ–éŠæˆ²çª—å£"""
        try:
            # åˆå§‹åŒ–Pygame
            pygame.init()
            
            # è¨­ç½®çª—å£åƒæ•¸
            self.width = width
            self.height = height
            self.title = title
            self.screen = pygame.display.set_mode((width, height))
            pygame.display.set_caption(title)
            
            # è¨­ç½®æ™‚é˜
            self.clock = pygame.time.Clock()
            self.fps = 60
            
            # è¨­ç½®é¡è‰²
            self.colors = {
                'black': (0, 0, 0),
                'white': (255, 255, 255),
                'red': (255, 0, 0),
                'green': (0, 255, 0),
                'blue': (0, 0, 255),
                'yellow': (255, 255, 0)
            }
            
            print("Game window initialized")
            
        except Exception as e:
            print(f"Error initializing game window: {e}")
    
    def handle_events(self) -> bool:
        """è™•ç†äº‹ä»¶"""
        try:
            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    return False
                elif event.type == pygame.KEYDOWN:
                    if event.key == pygame.K_ESCAPE:
                        return False
            return True
            
        except Exception as e:
            print(f"Error handling events: {e}")
            return False
    
    def clear_screen(self, color: Tuple[int, int, int] = (0, 0, 0)):
        """æ¸…ç©ºå±å¹•"""
        try:
            self.screen.fill(color)
            
        except Exception as e:
            print(f"Error clearing screen: {e}")
    
    def draw_rect(self, color: Tuple[int, int, int], 
                  rect: Tuple[int, int, int, int], 
                  width: int = 0):
        """ç¹ªè£½çŸ©å½¢"""
        try:
            pygame.draw.rect(self.screen, color, rect, width)
            
        except Exception as e:
            print(f"Error drawing rectangle: {e}")
    
    def draw_circle(self, color: Tuple[int, int, int], 
                   center: Tuple[int, int], 
                   radius: int, 
                   width: int = 0):
        """ç¹ªè£½åœ“å½¢"""
        try:
            pygame.draw.circle(self.screen, color, center, radius, width)
            
        except Exception as e:
            print(f"Error drawing circle: {e}")
    
    def draw_line(self, color: Tuple[int, int, int], 
                  start: Tuple[int, int], 
                  end: Tuple[int, int], 
                  width: int = 1):
        """ç¹ªè£½ç·šæ¢"""
        try:
            pygame.draw.line(self.screen, color, start, end, width)
            
        except Exception as e:
            print(f"Error drawing line: {e}")
    
    def draw_text(self, text: str, 
                  color: Tuple[int, int, int], 
                  position: Tuple[int, int], 
                  size: int = 32):
        """ç¹ªè£½æ–‡å­—"""
        try:
            font = pygame.font.Font(None, size)
            text_surface = font.render(text, True, color)
            self.screen.blit(text_surface, position)
            
        except Exception as e:
            print(f"Error drawing text: {e}")
    
    def update_display(self):
        """æ›´æ–°é¡¯ç¤º"""
        try:
            pygame.display.flip()
            
        except Exception as e:
            print(f"Error updating display: {e}")
    
    def run(self):
        """é‹è¡ŒéŠæˆ²å¾ªç’°"""
        try:
            running = True
            while running:
                # è™•ç†äº‹ä»¶
                running = self.handle_events()
                
                # æ¸…ç©ºå±å¹•
                self.clear_screen()
                
                # ç¹ªè£½éŠæˆ²å…ƒç´ 
                self.draw_rect(self.colors['red'], (100, 100, 50, 50))
                self.draw_circle(self.colors['blue'], (200, 200), 25)
                self.draw_line(self.colors['green'], (300, 300), (400, 400))
                self.draw_text("Hello, Game!", self.colors['yellow'], (100, 100))
                
                # æ›´æ–°é¡¯ç¤º
                self.update_display()
                
                # æ§åˆ¶å¹€ç‡
                self.clock.tick(self.fps)
            
            # é€€å‡ºéŠæˆ²
            pygame.quit()
            sys.exit()
            
        except Exception as e:
            print(f"Error in game loop: {e}")
            pygame.quit()
            sys.exit()

# ä½¿ç”¨ç¤ºä¾‹
def main():
    # å‰µå»ºéŠæˆ²çª—å£
    game = GameWindow()
    
    try:
        # é‹è¡ŒéŠæˆ²
        game.run()
    
    except Exception as e:
        print(f"Error in main: {e}")

if __name__ == '__main__':
    main()
```

### 2. éŠæˆ²ç²¾éˆ

```python
import pygame
import sys
import os
from typing import Tuple, List, Optional, Dict
import time

class Sprite:
    def __init__(self, image_path: str, position: Tuple[int, int], 
                 size: Optional[Tuple[int, int]] = None):
        """åˆå§‹åŒ–ç²¾éˆ"""
        try:
            # åŠ è¼‰åœ–åƒ
            self.image = pygame.image.load(image_path)
            
            # èª¿æ•´å¤§å°
            if size:
                self.image = pygame.transform.scale(self.image, size)
            
            # ç²å–çŸ©å½¢
            self.rect = self.image.get_rect()
            self.rect.x, self.rect.y = position
            
            # è¨­ç½®é€Ÿåº¦
            self.velocity = [0, 0]
            
            print(f"Sprite initialized at position {position}")
            
        except Exception as e:
            print(f"Error initializing sprite: {e}")
    
    def update(self):
        """æ›´æ–°ç²¾éˆ"""
        try:
            # æ›´æ–°ä½ç½®
            self.rect.x += self.velocity[0]
            self.rect.y += self.velocity[1]
            
        except Exception as e:
            print(f"Error updating sprite: {e}")
    
    def draw(self, screen: pygame.Surface):
        """ç¹ªè£½ç²¾éˆ"""
        try:
            screen.blit(self.image, self.rect)
            
        except Exception as e:
            print(f"Error drawing sprite: {e}")
    
    def set_velocity(self, velocity: Tuple[float, float]):
        """è¨­ç½®é€Ÿåº¦"""
        try:
            self.velocity = list(velocity)
            
        except Exception as e:
            print(f"Error setting velocity: {e}")
    
    def check_collision(self, other: 'Sprite') -> bool:
        """æª¢æŸ¥ç¢°æ’"""
        try:
            return self.rect.colliderect(other.rect)
            
        except Exception as e:
            print(f"Error checking collision: {e}")
            return False

class SpriteManager:
    def __init__(self):
        """åˆå§‹åŒ–ç²¾éˆç®¡ç†å™¨"""
        try:
            self.sprites = []
            print("Sprite manager initialized")
            
        except Exception as e:
            print(f"Error initializing sprite manager: {e}")
    
    def add_sprite(self, sprite: Sprite):
        """æ·»åŠ ç²¾éˆ"""
        try:
            self.sprites.append(sprite)
            print(f"Sprite added: {sprite}")
            
        except Exception as e:
            print(f"Error adding sprite: {e}")
    
    def remove_sprite(self, sprite: Sprite):
        """ç§»é™¤ç²¾éˆ"""
        try:
            if sprite in self.sprites:
                self.sprites.remove(sprite)
                print(f"Sprite removed: {sprite}")
            
        except Exception as e:
            print(f"Error removing sprite: {e}")
    
    def update_sprites(self):
        """æ›´æ–°æ‰€æœ‰ç²¾éˆ"""
        try:
            for sprite in self.sprites:
                sprite.update()
            
        except Exception as e:
            print(f"Error updating sprites: {e}")
    
    def draw_sprites(self, screen: pygame.Surface):
        """ç¹ªè£½æ‰€æœ‰ç²¾éˆ"""
        try:
            for sprite in self.sprites:
                sprite.draw(screen)
            
        except Exception as e:
            print(f"Error drawing sprites: {e}")
    
    def check_collisions(self):
        """æª¢æŸ¥æ‰€æœ‰ç²¾éˆçš„ç¢°æ’"""
        try:
            for i in range(len(self.sprites)):
                for j in range(i + 1, len(self.sprites)):
                    if self.sprites[i].check_collision(self.sprites[j]):
                        print(f"Collision detected between sprites {i} and {j}")
            
        except Exception as e:
            print(f"Error checking collisions: {e}")

# ä½¿ç”¨ç¤ºä¾‹
def main():
    # å‰µå»ºéŠæˆ²çª—å£
    pygame.init()
    screen = pygame.display.set_mode((800, 600))
    pygame.display.set_caption("Sprite Demo")
    clock = pygame.time.Clock()
    
    try:
        # å‰µå»ºç²¾éˆç®¡ç†å™¨
        sprite_manager = SpriteManager()
        
        # å‰µå»ºç²¾éˆ
        sprite1 = Sprite("sprite1.png", (100, 100), (50, 50))
        sprite2 = Sprite("sprite2.png", (200, 200), (50, 50))
        
        # æ·»åŠ ç²¾éˆ
        sprite_manager.add_sprite(sprite1)
        sprite_manager.add_sprite(sprite2)
        
        # è¨­ç½®é€Ÿåº¦
        sprite1.set_velocity((2, 2))
        sprite2.set_velocity((-2, -2))
        
        # éŠæˆ²å¾ªç’°
        running = True
        while running:
            # è™•ç†äº‹ä»¶
            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    running = False
                elif event.type == pygame.KEYDOWN:
                    if event.key == pygame.K_ESCAPE:
                        running = False
            
            # æ¸…ç©ºå±å¹•
            screen.fill((0, 0, 0))
            
            # æ›´æ–°å’Œç¹ªè£½ç²¾éˆ
            sprite_manager.update_sprites()
            sprite_manager.draw_sprites(screen)
            sprite_manager.check_collisions()
            
            # æ›´æ–°é¡¯ç¤º
            pygame.display.flip()
            
            # æ§åˆ¶å¹€ç‡
            clock.tick(60)
        
        # é€€å‡ºéŠæˆ²
        pygame.quit()
        sys.exit()
    
    except Exception as e:
        print(f"Error in main: {e}")
        pygame.quit()
        sys.exit()

if __name__ == '__main__':
    main()
```

## ç·´ç¿’é¡Œ

1. **éŠæˆ²çª—å£**
   é–‹ç™¼éŠæˆ²çª—å£ï¼š
   - çª—å£å‰µå»º
   - äº‹ä»¶è™•ç†
   - ç¹ªåœ–åŠŸèƒ½
   - å„ªåŒ–æ€§èƒ½

2. **éŠæˆ²ç²¾éˆ**
   å‰µå»ºéŠæˆ²ç²¾éˆï¼š
   - ç²¾éˆç®¡ç†
   - ç¢°æ’æª¢æ¸¬
   - å‹•ç•«æ•ˆæœ
   - å„ªåŒ–æ€§èƒ½

3. **éŠæˆ²é–‹ç™¼**
   å¯¦ç¾éŠæˆ²é–‹ç™¼ï¼š
   - éŠæˆ²å¾ªç’°
   - ç‹€æ…‹ç®¡ç†
   - å„ªåŒ–æ€§èƒ½
   - è™•ç†ç•°å¸¸

## å°æé†’ ğŸ’¡

1. éŠæˆ²çª—å£
   - é¸æ“‡åˆé©æ–¹æ³•
   - å„ªåŒ–åƒæ•¸
   - è™•ç†ç•°å¸¸
   - æä¾›ç›£æ§

2. éŠæˆ²ç²¾éˆ
   - é¸æ“‡åˆé©æ–¹æ³•
   - å„ªåŒ–æ€§èƒ½
   - è™•ç†ç•°å¸¸
   - æä¾›çµæœ

3. éŠæˆ²é–‹ç™¼
   - é¸æ“‡åˆé©ç®—æ³•
   - å„ªåŒ–æ€§èƒ½
   - è™•ç†ç•°å¸¸
   - æä¾›ç›£æ§

4. èª¿è©¦æŠ€å·§
   - ä½¿ç”¨é–‹ç™¼å·¥å…·
   - åˆ†ææ€§èƒ½
   - å„ªåŒ–é—œéµè·¯å¾‘
   - ç›£æ§è™•ç†ç‹€æ…‹

[ä¸Šä¸€ç« ï¼šæ©Ÿå™¨äººé€²éš](105_æ©Ÿå™¨äººé€²éš.md) | [ä¸‹ä¸€ç« ï¼šéŠæˆ²é–‹ç™¼é€²éš](107_éŠæˆ²é–‹ç™¼é€²éš.md) 