[ä¸Šä¸€ç« ï¼šJSONèˆ‡XMLè™•ç†](038_JSONèˆ‡XMLè™•ç†.md) | [ä¸‹ä¸€ç« ï¼šè³‡æ–™åº«åŸºç¤](040_è³‡æ–™åº«åŸºç¤.md)

# Python ç¶²è·¯ç¨‹å¼è¨­è¨ˆåŸºç¤ ğŸŒ

## HTTP è«‹æ±‚è™•ç†

### 1. ä½¿ç”¨ requests æ¨¡çµ„

```python
import requests

# ç™¼é€ GET è«‹æ±‚
response = requests.get('https://api.example.com/data')
print(f"ç‹€æ…‹ç¢¼ï¼š{response.status_code}")
print(f"éŸ¿æ‡‰å…§å®¹ï¼š{response.text}")

# ç™¼é€å¸¶åƒæ•¸çš„ GET è«‹æ±‚
params = {
    'page': 1,
    'limit': 10,
    'sort': 'desc'
}
response = requests.get('https://api.example.com/data', params=params)
print(f"å®Œæ•´ URLï¼š{response.url}")

# ç™¼é€ POST è«‹æ±‚
data = {
    'username': 'user1',
    'password': 'pass123'
}
response = requests.post('https://api.example.com/login', json=data)
print(f"éŸ¿æ‡‰ JSONï¼š{response.json()}")
```

### 2. è™•ç†è«‹æ±‚é ­å’Œ Cookie

```python
import requests

# è¨­ç½®è«‹æ±‚é ­
headers = {
    'User-Agent': 'Mozilla/5.0',
    'Authorization': 'Bearer token123',
    'Accept': 'application/json'
}

# ç™¼é€å¸¶è«‹æ±‚é ­çš„è«‹æ±‚
response = requests.get('https://api.example.com/data', headers=headers)

# è™•ç† Cookie
session = requests.Session()
response = session.get('https://example.com/login')
cookies = session.cookies
print(f"Cookieï¼š{dict(cookies)}")

# è¨­ç½®è‡ªå®šç¾© Cookie
cookies = {
    'session_id': 'abc123',
    'user_id': '12345'
}
response = requests.get('https://example.com', cookies=cookies)
```

## ç¶²è·¯æœå‹™å™¨

### 1. ä½¿ç”¨ Flask å‰µå»º Web æœå‹™å™¨

```python
from flask import Flask, request, jsonify

app = Flask(__name__)

# åŸºæœ¬è·¯ç”±
@app.route('/')
def home():
    return 'Welcome to My Web Server!'

# GET è«‹æ±‚è™•ç†
@app.route('/api/users', methods=['GET'])
def get_users():
    users = [
        {'id': 1, 'name': 'Alice'},
        {'id': 2, 'name': 'Bob'}
    ]
    return jsonify(users)

# POST è«‹æ±‚è™•ç†
@app.route('/api/users', methods=['POST'])
def create_user():
    data = request.json
    print(f"æ¥æ”¶åˆ°çš„æ•¸æ“šï¼š{data}")
    return jsonify({'message': 'ç”¨æˆ¶å‰µå»ºæˆåŠŸ', 'user': data}), 201

if __name__ == '__main__':
    app.run(debug=True)
```

### 2. RESTful API è¨­è¨ˆ

```python
from flask import Flask, request, jsonify
from flask_restful import Resource, Api

app = Flask(__name__)
api = Api(app)

# ç”¨æˆ¶è³‡æº
class User(Resource):
    def get(self, user_id):
        # ç²å–ç”¨æˆ¶ä¿¡æ¯
        return {'user_id': user_id, 'name': 'Test User'}
    
    def put(self, user_id):
        # æ›´æ–°ç”¨æˆ¶ä¿¡æ¯
        data = request.json
        return {'message': f'ç”¨æˆ¶ {user_id} å·²æ›´æ–°', 'data': data}
    
    def delete(self, user_id):
        # åˆªé™¤ç”¨æˆ¶
        return {'message': f'ç”¨æˆ¶ {user_id} å·²åˆªé™¤'}, 204

# ç”¨æˆ¶åˆ—è¡¨è³‡æº
class UserList(Resource):
    def get(self):
        # ç²å–ç”¨æˆ¶åˆ—è¡¨
        return {'users': [{'id': 1, 'name': 'Alice'}, {'id': 2, 'name': 'Bob'}]}
    
    def post(self):
        # å‰µå»ºæ–°ç”¨æˆ¶
        data = request.json
        return {'message': 'ç”¨æˆ¶å‰µå»ºæˆåŠŸ', 'user': data}, 201

# è¨»å†Šè·¯ç”±
api.add_resource(UserList, '/api/users')
api.add_resource(User, '/api/users/<int:user_id>')

if __name__ == '__main__':
    app.run(debug=True)
```

## Socket ç·¨ç¨‹

### 1. TCP æœå‹™å™¨å’Œå®¢æˆ¶ç«¯

```python
# TCP æœå‹™å™¨
import socket

def start_server():
    server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    server.bind(('localhost', 5000))
    server.listen(5)
    print("æœå‹™å™¨å•Ÿå‹•ï¼Œç­‰å¾…é€£æ¥...")
    
    while True:
        client, addr = server.accept()
        print(f"å®¢æˆ¶ç«¯é€£æ¥ï¼š{addr}")
        
        data = client.recv(1024).decode()
        print(f"æ¥æ”¶åˆ°çš„æ•¸æ“šï¼š{data}")
        
        response = f"æœå‹™å™¨æ”¶åˆ°ï¼š{data}"
        client.send(response.encode())
        client.close()

# TCP å®¢æˆ¶ç«¯
def start_client():
    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client.connect(('localhost', 5000))
    
    message = "Hello, Server!"
    client.send(message.encode())
    
    response = client.recv(1024).decode()
    print(f"æœå‹™å™¨éŸ¿æ‡‰ï¼š{response}")
    client.close()
```

### 2. UDP æœå‹™å™¨å’Œå®¢æˆ¶ç«¯

```python
# UDP æœå‹™å™¨
import socket

def start_udp_server():
    server = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    server.bind(('localhost', 5000))
    print("UDP æœå‹™å™¨å•Ÿå‹•...")
    
    while True:
        data, addr = server.recvfrom(1024)
        print(f"å¾ {addr} æ¥æ”¶åˆ°ï¼š{data.decode()}")
        
        response = f"æœå‹™å™¨æ”¶åˆ°ï¼š{data.decode()}"
        server.sendto(response.encode(), addr)

# UDP å®¢æˆ¶ç«¯
def start_udp_client():
    client = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    
    message = "Hello, UDP Server!"
    client.sendto(message.encode(), ('localhost', 5000))
    
    data, _ = client.recvfrom(1024)
    print(f"æœå‹™å™¨éŸ¿æ‡‰ï¼š{data.decode()}")
    client.close()
```

## ç•°æ­¥ç¶²è·¯ç·¨ç¨‹

### 1. ä½¿ç”¨ asyncio

```python
import asyncio
import aiohttp

async def fetch_data(url):
    async with aiohttp.ClientSession() as session:
        async with session.get(url) as response:
            return await response.text()

async def main():
    urls = [
        'https://api.example.com/data1',
        'https://api.example.com/data2',
        'https://api.example.com/data3'
    ]
    
    tasks = [fetch_data(url) for url in urls]
    results = await asyncio.gather(*tasks)
    
    for url, result in zip(urls, results):
        print(f"URL: {url}")
        print(f"çµæœ: {result[:100]}...")

# é‹è¡Œç•°æ­¥ç¨‹åº
asyncio.run(main())
```

### 2. ç•°æ­¥ Web æœå‹™å™¨

```python
from aiohttp import web

async def handle_get(request):
    return web.json_response({"message": "Hello, World!"})

async def handle_post(request):
    data = await request.json()
    return web.json_response({"received": data})

app = web.Application()
app.router.add_get('/', handle_get)
app.router.add_post('/data', handle_post)

if __name__ == '__main__':
    web.run_app(app)
```

## ç¶²è·¯å®‰å…¨

### 1. SSL/TLS é€£æ¥

```python
import ssl
import socket

def secure_client():
    # å‰µå»º SSL ä¸Šä¸‹æ–‡
    context = ssl.create_default_context()
    
    # å‰µå»ºå®‰å…¨é€£æ¥
    with socket.create_connection(('example.com', 443)) as sock:
        with context.wrap_socket(sock, server_hostname='example.com') as ssock:
            print(f"ä½¿ç”¨çš„åŠ å¯†å¥—ä»¶ï¼š{ssock.cipher()}")
            print(f"æœå‹™å™¨è­‰æ›¸ï¼š{ssock.getpeercert()}")
```

### 2. è«‹æ±‚é©—è­‰å’Œå®‰å…¨è™•ç†

```python
import requests
from requests.auth import HTTPBasicAuth
import hashlib

def secure_request():
    # åŸºæœ¬èªè­‰
    response = requests.get(
        'https://api.example.com/secure',
        auth=HTTPBasicAuth('user', 'password')
    )
    
    # è‡ªå®šç¾©è«‹æ±‚é ­
    headers = {
        'X-API-Key': 'your-api-key',
        'Authorization': 'Bearer your-token'
    }
    response = requests.get('https://api.example.com/data', headers=headers)
    
    # æ•¸æ“šåŠ å¯†
    def hash_password(password):
        return hashlib.sha256(password.encode()).hexdigest()
    
    # é©—è­‰ SSL è­‰æ›¸
    response = requests.get('https://example.com', verify=True)
```

## å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹

### 1. ç°¡å–®çš„èŠå¤©æœå‹™å™¨

```python
import socket
import threading

class ChatServer:
    def __init__(self, host='localhost', port=5000):
        self.server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.server.bind((host, port))
        self.server.listen(5)
        self.clients = []
        
    def broadcast(self, message, sender=None):
        for client in self.clients:
            if client != sender:
                try:
                    client.send(message)
                except:
                    self.clients.remove(client)
    
    def handle_client(self, client):
        while True:
            try:
                message = client.recv(1024)
                if message:
                    self.broadcast(message, client)
                else:
                    self.clients.remove(client)
                    break
            except:
                self.clients.remove(client)
                break
    
    def start(self):
        print("èŠå¤©æœå‹™å™¨å•Ÿå‹•...")
        while True:
            client, addr = self.server.accept()
            print(f"å®¢æˆ¶ç«¯é€£æ¥ï¼š{addr}")
            self.clients.append(client)
            threading.Thread(target=self.handle_client, args=(client,)).start()

# å•Ÿå‹•æœå‹™å™¨
if __name__ == '__main__':
    server = ChatServer()
    server.start()
```

### 2. ç¶²è·¯çˆ¬èŸ²

```python
import requests
from bs4 import BeautifulSoup
import time

class WebCrawler:
    def __init__(self):
        self.session = requests.Session()
        self.session.headers = {
            'User-Agent': 'Mozilla/5.0'
        }
    
    def fetch_page(self, url):
        try:
            response = self.session.get(url)
            response.raise_for_status()
            return response.text
        except requests.RequestException as e:
            print(f"ç²å–é é¢å¤±æ•—ï¼š{e}")
            return None
    
    def parse_page(self, html):
        if not html:
            return []
        
        soup = BeautifulSoup(html, 'html.parser')
        results = []
        
        # ç¤ºä¾‹ï¼šæå–æ‰€æœ‰éˆæ¥
        for link in soup.find_all('a'):
            href = link.get('href')
            text = link.text.strip()
            if href and text:
                results.append({
                    'url': href,
                    'text': text
                })
        
        return results
    
    def crawl(self, start_url, max_pages=10):
        visited = set()
        to_visit = [start_url]
        results = []
        
        while to_visit and len(visited) < max_pages:
            url = to_visit.pop(0)
            if url in visited:
                continue
            
            print(f"æ­£åœ¨çˆ¬å–ï¼š{url}")
            html = self.fetch_page(url)
            page_results = self.parse_page(html)
            results.extend(page_results)
            
            visited.add(url)
            time.sleep(1)  # é¿å…è«‹æ±‚éæ–¼é »ç¹
        
        return results

# ä½¿ç”¨çˆ¬èŸ²
crawler = WebCrawler()
results = crawler.crawl('https://example.com')
for result in results:
    print(f"URL: {result['url']}")
    print(f"æ–‡æœ¬: {result['text']}\n")
```

## ç·´ç¿’é¡Œ

1. **ç¶²è·¯ç›£æ§å·¥å…·**
   å¯¦ç¾ä¸€å€‹ç¶²è·¯ç›£æ§ç³»çµ±ï¼š
   - ç›£æ§ç¶²ç«™å¯ç”¨æ€§
   - æ¸¬è©¦éŸ¿æ‡‰æ™‚é–“
   - è¨˜éŒ„éŒ¯èª¤ä¿¡æ¯
   - ç™¼é€è­¦å ±é€šçŸ¥

2. **æ–‡ä»¶å‚³è¼¸æœå‹™å™¨**
   å‰µå»ºä¸€å€‹æ–‡ä»¶å‚³è¼¸ç³»çµ±ï¼š
   - æ”¯æ´ä¸Šå‚³ä¸‹è¼‰
   - é€²åº¦é¡¯ç¤º
   - æ–·é»çºŒå‚³
   - æ–‡ä»¶æ ¡é©—

3. **API ä»£ç†æœå‹™å™¨**
   é–‹ç™¼ä¸€å€‹ API ä»£ç†æœå‹™å™¨ï¼š
   - è«‹æ±‚è½‰ç™¼
   - éŸ¿æ‡‰ç·©å­˜
   - è² è¼‰å‡è¡¡
   - è¨ªå•æ§åˆ¶

## å°æé†’ ğŸ’¡

1. æ³¨æ„éŒ¯èª¤è™•ç†å’Œè¶…æ™‚è¨­ç½®
2. ä½¿ç”¨é©ç•¶çš„ä¸¦ç™¼ç­–ç•¥
3. å¯¦ç¾é©ç•¶çš„å®‰å…¨æªæ–½
4. è€ƒæ…®ç¶²çµ¡å»¶é²å’Œç©©å®šæ€§
5. æ­£ç¢ºè™•ç†è³‡æºé‡‹æ”¾
6. éµå®ˆç¶²ç«™çš„çˆ¬èŸ²è¦å‰‡

[ä¸Šä¸€ç« ï¼šJSONèˆ‡XMLè™•ç†](038_JSONèˆ‡XMLè™•ç†.md) | [ä¸‹ä¸€ç« ï¼šè³‡æ–™åº«åŸºç¤](040_è³‡æ–™åº«åŸºç¤.md) 