[ä¸Šä¸€ç« ï¼šå­—å…¸åŸºç¤](020_å­—å…¸åŸºç¤.md) | [ä¸‹ä¸€ç« ï¼šå‡½å¼åŸºç¤](022_å‡½å¼åŸºç¤.md)

# Python å­—å…¸é€²éšæ“ä½œ ğŸ”

## å·¢ç‹€å­—å…¸ï¼ˆNested Dictionariesï¼‰

å­—å…¸å¯ä»¥åŒ…å«å…¶ä»–å­—å…¸ä½œç‚ºå€¼ï¼Œé€™ç¨®çµæ§‹ç¨±ç‚ºå·¢ç‹€å­—å…¸ï¼š

```python
# å­¸ç”Ÿæˆç¸¾ç®¡ç†ç³»çµ±
students = {
    'Alice': {
        'math': 95,
        'english': 88,
        'science': 92,
        'history': {
            'ancient': 85,
            'modern': 90
        }
    },
    'Bob': {
        'math': 87,
        'english': 90,
        'science': 88,
        'history': {
            'ancient': 88,
            'modern': 85
        }
    }
}

# å­˜å–å·¢ç‹€å€¼
print(students['Alice']['history']['modern'])  # 90

# å®‰å…¨çš„å­˜å–æ–¹å¼
modern_score = students.get('Alice', {}).get('history', {}).get('modern', 'N/A')
```

## å­—å…¸çš„åˆä½µèˆ‡æ›´æ–°

### 1. ä½¿ç”¨ update() æ–¹æ³•

```python
dict1 = {'a': 1, 'b': 2}
dict2 = {'b': 3, 'c': 4}

# æ›´æ–°å­—å…¸
dict1.update(dict2)  # dict1 ç¾åœ¨æ˜¯ {'a': 1, 'b': 3, 'c': 4}

# ä½¿ç”¨å¤šå€‹å­—å…¸æ›´æ–°
dict1.update({'d': 5}, e=6, f=7)  # å¯ä»¥åŒæ™‚ä½¿ç”¨å­—å…¸å’Œé—œéµå­—åƒæ•¸
```

### 2. ä½¿ç”¨ | é‹ç®—ç¬¦ï¼ˆPython 3.9+ï¼‰

```python
dict1 = {'a': 1, 'b': 2}
dict2 = {'b': 3, 'c': 4}

# åˆä½µå­—å…¸
merged = dict1 | dict2  # {'a': 1, 'b': 3, 'c': 4}

# æ›´æ–°å­—å…¸
dict1 |= dict2  # ç­‰åŒæ–¼ dict1.update(dict2)
```

## å­—å…¸è¦–åœ–å°è±¡

å­—å…¸çš„ keys()ã€values() å’Œ items() æ–¹æ³•è¿”å›çš„æ˜¯è¦–åœ–å°è±¡ï¼Œå®ƒå€‘æœƒéš¨è‘—å­—å…¸çš„è®ŠåŒ–è€Œæ›´æ–°ï¼š

```python
student = {'name': 'Alice', 'age': 20}
keys = student.keys()
values = student.values()
items = student.items()

print(keys)    # dict_keys(['name', 'age'])
print(values)  # dict_values(['Alice', 20])
print(items)   # dict_items([('name', 'Alice'), ('age', 20)])

# è¦–åœ–æœƒéš¨å­—å…¸æ›´æ–°è€Œæ›´æ–°
student['grade'] = 'A'
print(keys)    # dict_keys(['name', 'age', 'grade'])
```

## é€²éšå­—å…¸æ¨å°å¼

```python
# æ¢ä»¶å­—å…¸æ¨å°å¼
scores = {'Alice': 85, 'Bob': 92, 'Charlie': 78, 'David': 95}
grades = {name: 'A' if score >= 90 else 'B' if score >= 80 else 'C' 
         for name, score in scores.items()}

# å·¢ç‹€å­—å…¸æ¨å°å¼
matrix = {i: {j: i*j for j in range(3)} for i in range(3)}
# çµæœï¼š
# {0: {0: 0, 1: 0, 2: 0},
#  1: {0: 0, 1: 1, 2: 2},
#  2: {0: 0, 1: 2, 2: 4}}
```

## å­—å…¸çš„æ’åº

### 1. æŒ‰éµæ’åº

```python
# ä½¿ç”¨ sorted() å‡½æ•¸
scores = {'Charlie': 78, 'Alice': 85, 'Bob': 92}
sorted_by_name = dict(sorted(scores.items()))

# è‡ªå®šç¾©æ’åº
sorted_by_length = dict(sorted(scores.items(), key=lambda x: len(x[0])))
```

### 2. æŒ‰å€¼æ’åº

```python
# æŒ‰åˆ†æ•¸æ’åº
sorted_by_score = dict(sorted(scores.items(), key=lambda x: x[1], reverse=True))

# æŒ‰å¤šå€‹æ¢ä»¶æ’åº
students = {
    'Alice': {'score': 85, 'age': 20},
    'Bob': {'score': 85, 'age': 19},
    'Charlie': {'score': 92, 'age': 21}
}

# å…ˆæŒ‰åˆ†æ•¸ï¼Œå†æŒ‰å¹´é½¡æ’åº
sorted_students = dict(sorted(students.items(),
                            key=lambda x: (x[1]['score'], x[1]['age']),
                            reverse=True))
```

## å­—å…¸çš„æ·±æ‹·è²èˆ‡æ·ºæ‹·è²

```python
import copy

original = {
    'name': 'Alice',
    'scores': [85, 90, 92],
    'info': {'age': 20, 'city': 'Taipei'}
}

# æ·ºæ‹·è²
shallow_copy = original.copy()  # æˆ–ä½¿ç”¨ dict(original)
shallow_copy['scores'][0] = 88  # æœƒå½±éŸ¿ original

# æ·±æ‹·è²
deep_copy = copy.deepcopy(original)
deep_copy['scores'][0] = 88  # ä¸æœƒå½±éŸ¿ original
```

## å¯¦ç”¨æŠ€å·§

### 1. é è¨­å€¼å­—å…¸

```python
from collections import defaultdict

# è‡ªå‹•æä¾›é è¨­å€¼çš„å­—å…¸
int_dict = defaultdict(int)  # é è¨­å€¼ç‚º 0
int_dict['a'] += 1  # ä¸æœƒå ±éŒ¯

list_dict = defaultdict(list)  # é è¨­å€¼ç‚ºç©ºåˆ—è¡¨
list_dict['fruits'].append('apple')  # ä¸éœ€è¦å…ˆåˆå§‹åŒ–åˆ—è¡¨
```

### 2. è¨ˆæ•¸å™¨å­—å…¸

```python
from collections import Counter

# çµ±è¨ˆå…ƒç´ å‡ºç¾æ¬¡æ•¸
text = "hello world"
char_count = Counter(text)
print(char_count)  # Counter({'l': 3, 'o': 2, 'h': 1, 'e': 1, ' ': 1, 'w': 1, 'r': 1, 'd': 1})

# æœ€å¸¸è¦‹å…ƒç´ 
print(char_count.most_common(2))  # [('l', 3), ('o', 2)]
```

### 3. æœ‰åºå­—å…¸

```python
from collections import OrderedDict

# ä¿æŒæ’å…¥é †åºçš„å­—å…¸ï¼ˆPython 3.7+ çš„æ™®é€šå­—å…¸ä¹Ÿæœƒä¿æŒé †åºï¼‰
ordered = OrderedDict()
ordered['first'] = 1
ordered['second'] = 2
ordered['third'] = 3
```

## ç·´ç¿’é¡Œ

1. **é€²éšå­—å…¸æ“ä½œ**
   å¯¦ç¾ä¸€å€‹å¤šå±¤ç´šçš„çµ„ç¹”æ¶æ§‹ç³»çµ±ï¼š
   - ä½¿ç”¨å·¢ç‹€å­—å…¸è¡¨ç¤ºéƒ¨é–€å’Œå“¡å·¥
   - æ”¯æ´æ–°å¢/åˆªé™¤éƒ¨é–€å’Œå“¡å·¥
   - è¨ˆç®—å„éƒ¨é–€è–ªè³‡ç¸½é¡
   - æŸ¥æ‰¾ç‰¹å®šæŠ€èƒ½çš„å“¡å·¥

2. **å­—å…¸è¦–åœ–æ‡‰ç”¨**
   å‰µå»ºä¸€å€‹å³æ™‚æ›´æ–°çš„åº«å­˜ç®¡ç†ç³»çµ±ï¼š
   - ä½¿ç”¨å­—å…¸è¦–åœ–è¿½è¹¤å•†å“æ•¸é‡
   - å¯¦ç¾å•†å“é€²å‡ºåº«åŠŸèƒ½
   - é¡¯ç¤ºåº«å­˜è®ŠåŒ–æ­·å²
   - è¨ˆç®—åº«å­˜ç¸½å€¼

3. **å­—å…¸æ’åºèˆ‡çµ±è¨ˆ**
   é–‹ç™¼ä¸€å€‹å­¸ç”Ÿæˆç¸¾åˆ†æç³»çµ±ï¼š
   - æ”¯æ´å¤šç§‘ç›®æˆç¸¾è¨˜éŒ„
   - è¨ˆç®—ç¸½åˆ†å’Œå¹³å‡åˆ†
   - æŒ‰ä¸åŒæ¢ä»¶æ’åºï¼ˆç¸½åˆ†ã€å–®ç§‘ã€å§“åï¼‰
   - ç”Ÿæˆæˆç¸¾çµ±è¨ˆå ±å‘Š

## å°æé†’ ğŸ’¡

1. ä½¿ç”¨ get() æ–¹æ³•çš„éˆå¼èª¿ç”¨å¯ä»¥å®‰å…¨åœ°å­˜å–å·¢ç‹€å­—å…¸
2. Python 3.9+ å¯ä»¥ä½¿ç”¨ | é‹ç®—ç¬¦åˆä½µå­—å…¸
3. å­—å…¸è¦–åœ–å°è±¡æœƒå‹•æ…‹åæ˜ å­—å…¸çš„è®ŠåŒ–
4. éœ€è¦è€ƒæ…®æ·±æ‹·è²å’Œæ·ºæ‹·è²çš„ä½¿ç”¨å ´æ™¯
5. collections æ¨¡çµ„æä¾›äº†å¾ˆå¤šå¯¦ç”¨çš„å­—å…¸è®Šé«”
6. å¤§å‹å·¢ç‹€å­—å…¸å»ºè­°ä½¿ç”¨ pprint æ¨¡çµ„ä¾†æ ¼å¼åŒ–è¼¸å‡º

[ä¸Šä¸€ç« ï¼šå­—å…¸åŸºç¤](020_å­—å…¸åŸºç¤.md) | [ä¸‹ä¸€ç« ï¼šå‡½å¼åŸºç¤](022_å‡½å¼åŸºç¤.md) 