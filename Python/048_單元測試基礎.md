[ä¸Šä¸€ç« ï¼šGUIç¨‹å¼è¨­è¨ˆé€²éšŽ](047_GUIç¨‹å¼è¨­è¨ˆé€²éšŽ.md) | [ä¸‹ä¸€ç« ï¼šé€²éšŽå–®å…ƒæ¸¬è©¦](049_é€²éšŽå–®å…ƒæ¸¬è©¦.md)

# Python å–®å…ƒæ¸¬è©¦åŸºç¤Ž ðŸ§ª

## å–®å…ƒæ¸¬è©¦ç°¡ä»‹

### 1. ä»€éº¼æ˜¯å–®å…ƒæ¸¬è©¦

```python
# ä¸€å€‹ç°¡å–®çš„å‡½æ•¸
def add_numbers(a, b):
    return a + b

# å°æ‡‰çš„å–®å…ƒæ¸¬è©¦
import unittest

class TestAddNumbers(unittest.TestCase):
    def test_add_positive_numbers(self):
        result = add_numbers(1, 2)
        self.assertEqual(result, 3)
    
    def test_add_negative_numbers(self):
        result = add_numbers(-1, -2)
        self.assertEqual(result, -3)
    
    def test_add_zero(self):
        result = add_numbers(5, 0)
        self.assertEqual(result, 5)

if __name__ == '__main__':
    unittest.main()
```

### 2. unittestæ¡†æž¶åŸºç¤Ž

```python
import unittest

class Calculator:
    def add(self, a, b):
        return a + b
    
    def subtract(self, a, b):
        return a - b
    
    def multiply(self, a, b):
        return a * b
    
    def divide(self, a, b):
        if b == 0:
            raise ValueError("Cannot divide by zero")
        return a / b

class TestCalculator(unittest.TestCase):
    def setUp(self):
        """åœ¨æ¯å€‹æ¸¬è©¦æ–¹æ³•ä¹‹å‰åŸ·è¡Œ"""
        self.calc = Calculator()
    
    def tearDown(self):
        """åœ¨æ¯å€‹æ¸¬è©¦æ–¹æ³•ä¹‹å¾ŒåŸ·è¡Œ"""
        pass
    
    def test_add(self):
        self.assertEqual(self.calc.add(3, 5), 8)
        self.assertEqual(self.calc.add(-1, 1), 0)
        self.assertEqual(self.calc.add(0, 0), 0)
    
    def test_subtract(self):
        self.assertEqual(self.calc.subtract(5, 3), 2)
        self.assertEqual(self.calc.subtract(1, 1), 0)
        self.assertEqual(self.calc.subtract(0, 5), -5)
    
    def test_multiply(self):
        self.assertEqual(self.calc.multiply(3, 5), 15)
        self.assertEqual(self.calc.multiply(-2, 3), -6)
        self.assertEqual(self.calc.multiply(0, 5), 0)
    
    def test_divide(self):
        self.assertEqual(self.calc.divide(6, 2), 3)
        self.assertEqual(self.calc.divide(5, 2), 2.5)
        self.assertEqual(self.calc.divide(0, 5), 0)
        
        # æ¸¬è©¦é™¤ä»¥é›¶çš„æƒ…æ³
        with self.assertRaises(ValueError):
            self.calc.divide(5, 0)

if __name__ == '__main__':
    unittest.main()
```

## æ¸¬è©¦ç”¨ä¾‹ç·¨å¯«

### 1. åŸºæœ¬æ–·è¨€æ–¹æ³•

```python
import unittest

class TestAssertMethods(unittest.TestCase):
    def test_assertions(self):
        # ç›¸ç­‰æ€§æ¸¬è©¦
        self.assertEqual(5 + 5, 10)
        self.assertNotEqual(5 + 5, 11)
        
        # å¸ƒçˆ¾å€¼æ¸¬è©¦
        self.assertTrue(5 > 3)
        self.assertFalse(5 < 3)
        
        # Noneæ¸¬è©¦
        x = None
        self.assertIsNone(x)
        y = 5
        self.assertIsNotNone(y)
        
        # åŒ…å«é—œä¿‚æ¸¬è©¦
        list1 = [1, 2, 3]
        self.assertIn(2, list1)
        self.assertNotIn(4, list1)
        
        # å¯¦ä¾‹é¡žåž‹æ¸¬è©¦
        self.assertIsInstance("test", str)
        self.assertNotIsInstance("test", int)
        
        # å¤§å°æ¯”è¼ƒ
        self.assertGreater(5, 3)
        self.assertGreaterEqual(5, 5)
        self.assertLess(3, 5)
        self.assertLessEqual(5, 5)
        
        # è¿‘ä¼¼ç›¸ç­‰ï¼ˆæµ®é»žæ•¸æ¯”è¼ƒï¼‰
        self.assertAlmostEqual(0.1 + 0.2, 0.3, places=7)

if __name__ == '__main__':
    unittest.main()
```

### 2. ç•°å¸¸æ¸¬è©¦

```python
import unittest

def divide(a, b):
    if b == 0:
        raise ValueError("Cannot divide by zero")
    return a / b

class TestExceptions(unittest.TestCase):
    def test_divide_by_zero(self):
        # æ¸¬è©¦æ˜¯å¦æ‹‹å‡ºæŒ‡å®šç•°å¸¸
        with self.assertRaises(ValueError):
            divide(5, 0)
        
        # æ¸¬è©¦ç•°å¸¸æ¶ˆæ¯
        with self.assertRaisesRegex(ValueError, "Cannot divide by zero"):
            divide(5, 0)
    
    def test_divide_normal(self):
        # æ­£å¸¸æƒ…æ³æ¸¬è©¦
        self.assertEqual(divide(6, 2), 3)
        self.assertEqual(divide(5, 2), 2.5)

if __name__ == '__main__':
    unittest.main()
```

## æ¸¬è©¦çµ„ç¹”å’ŒåŸ·è¡Œ

### 1. æ¸¬è©¦å¥—ä»¶

```python
import unittest

# æ¸¬è©¦é¡ž1
class TestStringMethods(unittest.TestCase):
    def test_upper(self):
        self.assertEqual('foo'.upper(), 'FOO')
    
    def test_isupper(self):
        self.assertTrue('FOO'.isupper())
        self.assertFalse('Foo'.isupper())

# æ¸¬è©¦é¡ž2
class TestNumberMethods(unittest.TestCase):
    def test_addition(self):
        self.assertEqual(1 + 1, 2)
    
    def test_subtraction(self):
        self.assertEqual(3 - 1, 2)

def create_test_suite():
    # å‰µå»ºæ¸¬è©¦å¥—ä»¶
    suite = unittest.TestSuite()
    
    # æ·»åŠ æ¸¬è©¦é¡ž
    suite.addTests(unittest.TestLoader().loadTestsFromTestCase(TestStringMethods))
    suite.addTests(unittest.TestLoader().loadTestsFromTestCase(TestNumberMethods))
    
    return suite

if __name__ == '__main__':
    # å‰µå»ºæ¸¬è©¦å¥—ä»¶
    suite = create_test_suite()
    
    # é‹è¡Œæ¸¬è©¦
    runner = unittest.TextTestRunner(verbosity=2)
    runner.run(suite)
```

### 2. è·³éŽæ¸¬è©¦

```python
import unittest
import sys

class TestSkipping(unittest.TestCase):
    @unittest.skip("æ¼”ç¤ºè·³éŽæ¸¬è©¦")
    def test_skipped(self):
        self.fail("é€™å€‹æ¸¬è©¦ä¸æ‡‰è©²é‹è¡Œ")
    
    @unittest.skipIf(sys.version_info.major < 3,
                    "åƒ…åœ¨Python 3åŠä»¥ä¸Šç‰ˆæœ¬é‹è¡Œ")
    def test_python3_feature(self):
        # æ¸¬è©¦Python 3ç‰¹æœ‰çš„åŠŸèƒ½
        self.assertEqual(1, 1)
    
    @unittest.skipUnless(sys.platform.startswith("win"),
                        "åƒ…åœ¨Windowså¹³å°é‹è¡Œ")
    def test_windows_feature(self):
        # æ¸¬è©¦Windowsç‰¹æœ‰çš„åŠŸèƒ½
        self.assertEqual(1, 1)
    
    def test_expected_failure(self):
        # æ¨™è¨˜é æœŸå¤±æ•—çš„æ¸¬è©¦
        self.assertEqual(1, 2)
    test_expected_failure = unittest.expectedFailure(test_expected_failure)

if __name__ == '__main__':
    unittest.main()
```

## å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹

### 1. ç”¨æˆ¶ç®¡ç†ç³»çµ±æ¸¬è©¦

```python
class User:
    def __init__(self, username, email):
        self.username = username
        self.email = email
        self.is_active = True
    
    def deactivate(self):
        self.is_active = False
    
    def activate(self):
        self.is_active = True
    
    def update_email(self, new_email):
        if '@' not in new_email:
            raise ValueError("Invalid email format")
        self.email = new_email

class UserManager:
    def __init__(self):
        self.users = {}
    
    def add_user(self, username, email):
        if username in self.users:
            raise ValueError("Username already exists")
        user = User(username, email)
        self.users[username] = user
        return user
    
    def get_user(self, username):
        return self.users.get(username)
    
    def delete_user(self, username):
        if username in self.users:
            del self.users[username]
            return True
        return False

class TestUserSystem(unittest.TestCase):
    def setUp(self):
        self.manager = UserManager()
    
    def test_add_user(self):
        user = self.manager.add_user("john", "john@example.com")
        self.assertEqual(user.username, "john")
        self.assertEqual(user.email, "john@example.com")
        self.assertTrue(user.is_active)
        
        # æ¸¬è©¦æ·»åŠ é‡è¤‡ç”¨æˆ¶
        with self.assertRaises(ValueError):
            self.manager.add_user("john", "john2@example.com")
    
    def test_get_user(self):
        self.manager.add_user("jane", "jane@example.com")
        user = self.manager.get_user("jane")
        self.assertIsNotNone(user)
        self.assertEqual(user.username, "jane")
        
        # æ¸¬è©¦ç²å–ä¸å­˜åœ¨çš„ç”¨æˆ¶
        user = self.manager.get_user("nonexistent")
        self.assertIsNone(user)
    
    def test_delete_user(self):
        self.manager.add_user("bob", "bob@example.com")
        self.assertTrue(self.manager.delete_user("bob"))
        self.assertIsNone(self.manager.get_user("bob"))
        
        # æ¸¬è©¦åˆªé™¤ä¸å­˜åœ¨çš„ç”¨æˆ¶
        self.assertFalse(self.manager.delete_user("nonexistent"))
    
    def test_user_operations(self):
        user = self.manager.add_user("alice", "alice@example.com")
        
        # æ¸¬è©¦åœç”¨ç”¨æˆ¶
        user.deactivate()
        self.assertFalse(user.is_active)
        
        # æ¸¬è©¦å•Ÿç”¨ç”¨æˆ¶
        user.activate()
        self.assertTrue(user.is_active)
        
        # æ¸¬è©¦æ›´æ–°éƒµç®±
        user.update_email("alice.new@example.com")
        self.assertEqual(user.email, "alice.new@example.com")
        
        # æ¸¬è©¦ç„¡æ•ˆçš„éƒµç®±æ ¼å¼
        with self.assertRaises(ValueError):
            user.update_email("invalid_email")

if __name__ == '__main__':
    unittest.main()
```

### 2. æ–‡ä»¶è™•ç†æ¸¬è©¦

```python
import os
import tempfile
import unittest

class FileProcessor:
    def __init__(self, filename):
        self.filename = filename
    
    def write_content(self, content):
        with open(self.filename, 'w', encoding='utf-8') as f:
            f.write(content)
    
    def read_content(self):
        with open(self.filename, 'r', encoding='utf-8') as f:
            return f.read()
    
    def append_content(self, content):
        with open(self.filename, 'a', encoding='utf-8') as f:
            f.write(content)
    
    def count_lines(self):
        with open(self.filename, 'r', encoding='utf-8') as f:
            return len(f.readlines())

class TestFileProcessor(unittest.TestCase):
    def setUp(self):
        # å‰µå»ºè‡¨æ™‚æ–‡ä»¶
        self.test_dir = tempfile.mkdtemp()
        self.test_file = os.path.join(self.test_dir, 'test.txt')
        self.processor = FileProcessor(self.test_file)
    
    def tearDown(self):
        # æ¸…ç†è‡¨æ™‚æ–‡ä»¶
        if os.path.exists(self.test_file):
            os.remove(self.test_file)
        os.rmdir(self.test_dir)
    
    def test_write_and_read(self):
        content = "Hello, World!"
        self.processor.write_content(content)
        
        # æ¸¬è©¦è®€å–å…§å®¹
        read_content = self.processor.read_content()
        self.assertEqual(read_content, content)
    
    def test_append_content(self):
        initial_content = "First line\n"
        self.processor.write_content(initial_content)
        
        # è¿½åŠ å…§å®¹
        additional_content = "Second line"
        self.processor.append_content(additional_content)
        
        # é©—è­‰çµæžœ
        expected_content = initial_content + additional_content
        self.assertEqual(self.processor.read_content(), expected_content)
    
    def test_count_lines(self):
        content = "Line 1\nLine 2\nLine 3\n"
        self.processor.write_content(content)
        
        # æ¸¬è©¦è¡Œæ•¸
        self.assertEqual(self.processor.count_lines(), 3)
    
    def test_file_not_found(self):
        processor = FileProcessor('nonexistent.txt')
        
        # æ¸¬è©¦è®€å–ä¸å­˜åœ¨çš„æ–‡ä»¶
        with self.assertRaises(FileNotFoundError):
            processor.read_content()

if __name__ == '__main__':
    unittest.main()
```

## ç·´ç¿’é¡Œ

1. **è¨ˆç®—å™¨æ¸¬è©¦**
   ç‚ºä¸€å€‹ç°¡å–®çš„è¨ˆç®—å™¨é¡žç·¨å¯«å®Œæ•´çš„å–®å…ƒæ¸¬è©¦ï¼š
   - æ¸¬è©¦åŸºæœ¬é‹ç®—ï¼ˆåŠ ã€æ¸›ã€ä¹˜ã€é™¤ï¼‰
   - æ¸¬è©¦ç•°å¸¸æƒ…æ³ï¼ˆé™¤ä»¥é›¶ç­‰ï¼‰
   - æ¸¬è©¦é‚Šç•Œå€¼
   - ä½¿ç”¨åƒæ•¸åŒ–æ¸¬è©¦

2. **å­—ç¬¦ä¸²è™•ç†æ¸¬è©¦**
   ç·¨å¯«ä¸€å€‹å­—ç¬¦ä¸²è™•ç†é¡žçš„æ¸¬è©¦ç”¨ä¾‹ï¼š
   - æ¸¬è©¦å­—ç¬¦ä¸²è½‰æ›æ–¹æ³•
   - æ¸¬è©¦å­—ç¬¦ä¸²æŸ¥æ‰¾å’Œæ›¿æ›
   - æ¸¬è©¦æ­£å‰‡è¡¨é”å¼åŒ¹é…
   - æ¸¬è©¦Unicodeå­—ç¬¦è™•ç†

3. **æ•¸æ“šé©—è­‰æ¸¬è©¦**
   å¯¦ç¾ä¸€å€‹æ•¸æ“šé©—è­‰å™¨çš„æ¸¬è©¦ï¼š
   - æ¸¬è©¦ä¸åŒé¡žåž‹çš„æ•¸æ“šé©—è­‰
   - æ¸¬è©¦éŒ¯èª¤è™•ç†
   - æ¸¬è©¦è‡ªå®šç¾©é©—è­‰è¦å‰‡
   - ä½¿ç”¨æ¸¬è©¦å¤¾å…·

## å°æé†’ ðŸ’¡

1. æ¸¬è©¦è¨­è¨ˆ
   - éµå¾ªFIRSTåŽŸå‰‡ï¼ˆFast, Isolated, Repeatable, Self-validating, Timelyï¼‰
   - ä¸€å€‹æ¸¬è©¦æ–¹æ³•åªæ¸¬è©¦ä¸€å€‹åŠŸèƒ½é»ž
   - ä½¿ç”¨æœ‰æ„ç¾©çš„æ¸¬è©¦åç¨±
   - ä¿æŒæ¸¬è©¦ä»£ç¢¼çš„ç°¡æ½”å’Œå¯è®€æ€§

2. æ¸¬è©¦è¦†è“‹
   - åŒ…å«æ­£å¸¸æƒ…æ³å’Œé‚Šç•Œæƒ…æ³
   - æ¸¬è©¦ç•°å¸¸è™•ç†
   - ä½¿ç”¨è¦†è“‹çŽ‡å·¥å…·æª¢æŸ¥æ¸¬è©¦è¦†è“‹çŽ‡
   - å®šæœŸæ›´æ–°å’Œç¶­è­·æ¸¬è©¦ç”¨ä¾‹

3. æ¸¬è©¦åŸ·è¡Œ
   - ç¶“å¸¸é‹è¡Œæ¸¬è©¦
   - ä¿æŒæ¸¬è©¦çš„ç¨ç«‹æ€§
   - ä½¿ç”¨æŒçºŒé›†æˆ
   - åŠæ™‚ä¿®å¾©å¤±æ•—çš„æ¸¬è©¦

4. æœ€ä½³å¯¦è¸
   - ä½¿ç”¨æ¸¬è©¦å¤¾å…·å…±äº«è¨­ç½®ä»£ç¢¼
   - é©ç•¶ä½¿ç”¨mockå°è±¡
   - ä¿æŒæ¸¬è©¦çš„å¯ç¶­è­·æ€§
   - ç·¨å¯«æ–‡æª”å­—ç¬¦ä¸²èªªæ˜Žæ¸¬è©¦ç›®çš„

[ä¸Šä¸€ç« ï¼šGUIç¨‹å¼è¨­è¨ˆé€²éšŽ](047_GUIç¨‹å¼è¨­è¨ˆé€²éšŽ.md) | [ä¸‹ä¸€ç« ï¼šé€²éšŽå–®å…ƒæ¸¬è©¦](049_é€²éšŽå–®å…ƒæ¸¬è©¦.md) 