[ä¸Šä¸€ç« ï¼šWebé–‹ç™¼åŸºç¤](090_Webé–‹ç™¼åŸºç¤.md) | [ä¸‹ä¸€ç« ï¼šDjangoæ¡†æ¶åŸºç¤](092_Djangoæ¡†æ¶åŸºç¤.md)

# Python Webé–‹ç™¼é€²éš ğŸŒ

## RESTful API

### 1. APIæœå‹™å™¨

```python
from flask import Flask, request, jsonify, render_template
from flask_restful import Api, Resource, reqparse
import time
from typing import List, Dict, Any, Optional
import sys
import os

class APIServer:
    def __init__(self):
        """åˆå§‹åŒ–APIæœå‹™å™¨"""
        self.app = Flask(__name__)
        self.api = Api(self.app)
        self.setup_routes()
    
    def setup_routes(self):
        """è¨­ç½®è·¯ç”±"""
        # ç”¨æˆ¶è³‡æº
        class UserResource(Resource):
            def __init__(self):
                self.parser = reqparse.RequestParser()
                self.parser.add_argument('name', type=str, required=True)
                self.parser.add_argument('email', type=str, required=True)
            
            def get(self, user_id=None):
                """ç²å–ç”¨æˆ¶ä¿¡æ¯"""
                if user_id:
                    # é€™è£¡æ‡‰è©²å¾æ•¸æ“šåº«ç²å–ç”¨æˆ¶ä¿¡æ¯
                    user = {'id': user_id, 'name': 'John Doe', 'email': 'john@example.com'}
                    return user
                else:
                    # é€™è£¡æ‡‰è©²å¾æ•¸æ“šåº«ç²å–ç”¨æˆ¶åˆ—è¡¨
                    users = [
                        {'id': 1, 'name': 'John Doe', 'email': 'john@example.com'},
                        {'id': 2, 'name': 'Jane Smith', 'email': 'jane@example.com'}
                    ]
                    return users
            
            def post(self):
                """å‰µå»ºç”¨æˆ¶"""
                args = self.parser.parse_args()
                
                # é€™è£¡æ‡‰è©²æ·»åŠ æ•¸æ“šåº«æ“ä½œ
                user = {
                    'id': 3,
                    'name': args['name'],
                    'email': args['email']
                }
                return user, 201
            
            def put(self, user_id):
                """æ›´æ–°ç”¨æˆ¶"""
                args = self.parser.parse_args()
                
                # é€™è£¡æ‡‰è©²æ·»åŠ æ•¸æ“šåº«æ“ä½œ
                user = {
                    'id': user_id,
                    'name': args['name'],
                    'email': args['email']
                }
                return user
            
            def delete(self, user_id):
                """åˆªé™¤ç”¨æˆ¶"""
                # é€™è£¡æ‡‰è©²æ·»åŠ æ•¸æ“šåº«æ“ä½œ
                return '', 204
        
        # è¨»å†Šè·¯ç”±
        self.api.add_resource(UserResource, '/api/users', '/api/users/<int:user_id>')
    
    def run(self, host: str = 'localhost', port: int = 5000, debug: bool = True):
        """é‹è¡ŒAPIæœå‹™å™¨"""
        self.app.run(host=host, port=port, debug=debug)

# ä½¿ç”¨ç¤ºä¾‹
def main():
    # å‰µå»ºAPIæœå‹™å™¨
    server = APIServer()
    
    try:
        # é‹è¡Œæœå‹™å™¨
        server.run()
    
    except KeyboardInterrupt:
        print("\nShutting down...")

if __name__ == '__main__':
    main()
```

### 2. APIå®¢æˆ¶ç«¯

```python
import requests
import time
from typing import List, Dict, Any, Optional
import sys
import os

class APIClient:
    def __init__(self, base_url: str):
        """åˆå§‹åŒ–APIå®¢æˆ¶ç«¯"""
        self.base_url = base_url
        self.session = requests.Session()
    
    def get_users(self) -> List[Dict[str, Any]]:
        """ç²å–ç”¨æˆ¶åˆ—è¡¨"""
        try:
            response = self.session.get(f"{self.base_url}/api/users")
            response.raise_for_status()
            return response.json()
            
        except requests.exceptions.RequestException as e:
            print(f"Error getting users: {e}")
            return []
    
    def get_user(self, user_id: int) -> Optional[Dict[str, Any]]:
        """ç²å–ç”¨æˆ¶ä¿¡æ¯"""
        try:
            response = self.session.get(f"{self.base_url}/api/users/{user_id}")
            response.raise_for_status()
            return response.json()
            
        except requests.exceptions.RequestException as e:
            print(f"Error getting user: {e}")
            return None
    
    def create_user(self, name: str, email: str) -> Optional[Dict[str, Any]]:
        """å‰µå»ºç”¨æˆ¶"""
        try:
            data = {'name': name, 'email': email}
            response = self.session.post(f"{self.base_url}/api/users", json=data)
            response.raise_for_status()
            return response.json()
            
        except requests.exceptions.RequestException as e:
            print(f"Error creating user: {e}")
            return None
    
    def update_user(self, user_id: int, name: str, email: str) -> Optional[Dict[str, Any]]:
        """æ›´æ–°ç”¨æˆ¶"""
        try:
            data = {'name': name, 'email': email}
            response = self.session.put(f"{self.base_url}/api/users/{user_id}", json=data)
            response.raise_for_status()
            return response.json()
            
        except requests.exceptions.RequestException as e:
            print(f"Error updating user: {e}")
            return None
    
    def delete_user(self, user_id: int) -> bool:
        """åˆªé™¤ç”¨æˆ¶"""
        try:
            response = self.session.delete(f"{self.base_url}/api/users/{user_id}")
            response.raise_for_status()
            return True
            
        except requests.exceptions.RequestException as e:
            print(f"Error deleting user: {e}")
            return False

# ä½¿ç”¨ç¤ºä¾‹
def main():
    # å‰µå»ºAPIå®¢æˆ¶ç«¯
    client = APIClient('http://localhost:5000')
    
    try:
        # ç²å–ç”¨æˆ¶åˆ—è¡¨
        users = client.get_users()
        print("Users:", users)
        
        # å‰µå»ºç”¨æˆ¶
        new_user = client.create_user('John Doe', 'john@example.com')
        print("Created user:", new_user)
        
        if new_user:
            # æ›´æ–°ç”¨æˆ¶
            updated_user = client.update_user(
                new_user['id'],
                'John Smith',
                'john.smith@example.com'
            )
            print("Updated user:", updated_user)
            
            # ç²å–ç”¨æˆ¶ä¿¡æ¯
            user = client.get_user(new_user['id'])
            print("User:", user)
            
            # åˆªé™¤ç”¨æˆ¶
            if client.delete_user(new_user['id']):
                print("User deleted successfully")
    
    except Exception as e:
        print(f"Error in main: {e}")

if __name__ == '__main__':
    main()
```

## ç·´ç¿’é¡Œ

1. **APIæœå‹™å™¨**
   é–‹ç™¼ä¸€å€‹APIæœå‹™å™¨ï¼š
   - å¯¦ç¾RESTful API
   - è™•ç†è«‹æ±‚åƒæ•¸
   - è¿”å›JSONéŸ¿æ‡‰
   - æä¾›éŒ¯èª¤è™•ç†

2. **APIå®¢æˆ¶ç«¯**
   å‰µå»ºä¸€å€‹APIå®¢æˆ¶ç«¯ï¼š
   - ç™¼é€HTTPè«‹æ±‚
   - è™•ç†éŸ¿æ‡‰æ•¸æ“š
   - å„ªåŒ–è«‹æ±‚æ•ˆç‡
   - æä¾›éŒ¯èª¤è™•ç†

3. **APIæ‡‰ç”¨**
   å¯¦ç¾ä¸€å€‹APIæ‡‰ç”¨ï¼š
   - è¨­è¨ˆAPIæ¥å£
   - å¯¦ç¾CRUDæ“ä½œ
   - å„ªåŒ–æ€§èƒ½
   - è™•ç†è¤‡é›œå ´æ™¯

## å°æé†’ ğŸ’¡

1. APIè¨­è¨ˆ
   - éµå¾ªRESTåŸå‰‡
   - è¨­è¨ˆURLçµæ§‹
   - é¸æ“‡HTTPæ–¹æ³•
   - è€ƒæ…®ç‰ˆæœ¬æ§åˆ¶

2. æ•¸æ“šè™•ç†
   - é©—è­‰è«‹æ±‚åƒæ•¸
   - è™•ç†éŸ¿æ‡‰æ•¸æ“š
   - å„ªåŒ–æ•¸æ“šæ ¼å¼
   - è™•ç†éŒ¯èª¤æƒ…æ³

3. å®‰å…¨æ€§
   - ä½¿ç”¨HTTPS
   - å¯¦ç¾èªè­‰
   - æ§åˆ¶è¨ªå•
   - ä¿è­·æ•æ„Ÿæ•¸æ“š

4. èª¿è©¦æŠ€å·§
   - ä½¿ç”¨APIå·¥å…·
   - åˆ†æè«‹æ±‚éŸ¿æ‡‰
   - å„ªåŒ–é—œéµè·¯å¾‘
   - ç›£æ§APIç‹€æ…‹

[ä¸Šä¸€ç« ï¼šWebé–‹ç™¼åŸºç¤](090_Webé–‹ç™¼åŸºç¤.md) | [ä¸‹ä¸€ç« ï¼šDjangoæ¡†æ¶åŸºç¤](092_Djangoæ¡†æ¶åŸºç¤.md) 