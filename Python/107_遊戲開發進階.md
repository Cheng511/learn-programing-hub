[ä¸Šä¸€ç« ï¼šéŠæˆ²é–‹ç™¼åŸºç¤](106_éŠæˆ²é–‹ç™¼åŸºç¤.md) | [ä¸‹ä¸€ç« ï¼šç¶²çµ¡ç·¨ç¨‹åŸºç¤](108_ç¶²çµ¡ç·¨ç¨‹åŸºç¤.md)

# Python éŠæˆ²é–‹ç™¼é€²éš ğŸ®

## éŠæˆ²é–‹ç™¼é€²éš

### 1. éŠæˆ²ç‰©ç†

```python
import pygame
import sys
import os
from typing import Tuple, List, Optional, Dict
import time
import math

class PhysicsObject:
    def __init__(self, position: Tuple[float, float], 
                 velocity: Tuple[float, float] = (0, 0),
                 mass: float = 1.0,
                 restitution: float = 0.8):
        """åˆå§‹åŒ–ç‰©ç†å°è±¡"""
        try:
            # è¨­ç½®åŸºæœ¬å±¬æ€§
            self.position = list(position)
            self.velocity = list(velocity)
            self.mass = mass
            self.restitution = restitution
            
            # è¨­ç½®åŠ›
            self.forces = [0, 0]
            
            print(f"Physics object initialized at position {position}")
            
        except Exception as e:
            print(f"Error initializing physics object: {e}")
    
    def apply_force(self, force: Tuple[float, float]):
        """æ–½åŠ åŠ›"""
        try:
            self.forces[0] += force[0]
            self.forces[1] += force[1]
            
        except Exception as e:
            print(f"Error applying force: {e}")
    
    def update(self, dt: float):
        """æ›´æ–°ç‰©ç†ç‹€æ…‹"""
        try:
            # è¨ˆç®—åŠ é€Ÿåº¦
            ax = self.forces[0] / self.mass
            ay = self.forces[1] / self.mass
            
            # æ›´æ–°é€Ÿåº¦
            self.velocity[0] += ax * dt
            self.velocity[1] += ay * dt
            
            # æ›´æ–°ä½ç½®
            self.position[0] += self.velocity[0] * dt
            self.position[1] += self.velocity[1] * dt
            
            # é‡ç½®åŠ›
            self.forces = [0, 0]
            
        except Exception as e:
            print(f"Error updating physics: {e}")
    
    def check_collision(self, other: 'PhysicsObject') -> bool:
        """æª¢æŸ¥ç¢°æ’"""
        try:
            # ç°¡å–®çš„åœ“å½¢ç¢°æ’æª¢æ¸¬
            dx = self.position[0] - other.position[0]
            dy = self.position[1] - other.position[1]
            distance = math.sqrt(dx*dx + dy*dy)
            return distance < 50  # å‡è¨­åŠå¾‘ç‚º50
            
        except Exception as e:
            print(f"Error checking collision: {e}")
            return False
    
    def resolve_collision(self, other: 'PhysicsObject'):
        """è§£æ±ºç¢°æ’"""
        try:
            # è¨ˆç®—ç¢°æ’æ³•ç·š
            dx = other.position[0] - self.position[0]
            dy = other.position[1] - self.position[1]
            distance = math.sqrt(dx*dx + dy*dy)
            
            if distance == 0:
                return
            
            nx = dx / distance
            ny = dy / distance
            
            # è¨ˆç®—ç›¸å°é€Ÿåº¦
            dvx = self.velocity[0] - other.velocity[0]
            dvy = self.velocity[1] - other.velocity[1]
            relative_velocity = dvx*nx + dvy*ny
            
            # å¦‚æœç‰©é«”æ­£åœ¨åˆ†é›¢ï¼Œä¸éœ€è¦è™•ç†ç¢°æ’
            if relative_velocity > 0:
                return
            
            # è¨ˆç®—è¡é‡
            j = -(1 + self.restitution) * relative_velocity
            j /= 1/self.mass + 1/other.mass
            
            # æ‡‰ç”¨è¡é‡
            self.velocity[0] -= j * nx / self.mass
            self.velocity[1] -= j * ny / self.mass
            other.velocity[0] += j * nx / other.mass
            other.velocity[1] += j * ny / other.mass
            
        except Exception as e:
            print(f"Error resolving collision: {e}")

class PhysicsWorld:
    def __init__(self, gravity: Tuple[float, float] = (0, 9.81)):
        """åˆå§‹åŒ–ç‰©ç†ä¸–ç•Œ"""
        try:
            self.objects = []
            self.gravity = list(gravity)
            print("Physics world initialized")
            
        except Exception as e:
            print(f"Error initializing physics world: {e}")
    
    def add_object(self, obj: PhysicsObject):
        """æ·»åŠ ç‰©ç†å°è±¡"""
        try:
            self.objects.append(obj)
            print(f"Physics object added: {obj}")
            
        except Exception as e:
            print(f"Error adding physics object: {e}")
    
    def remove_object(self, obj: PhysicsObject):
        """ç§»é™¤ç‰©ç†å°è±¡"""
        try:
            if obj in self.objects:
                self.objects.remove(obj)
                print(f"Physics object removed: {obj}")
            
        except Exception as e:
            print(f"Error removing physics object: {e}")
    
    def update(self, dt: float):
        """æ›´æ–°ç‰©ç†ä¸–ç•Œ"""
        try:
            # æ›´æ–°æ‰€æœ‰å°è±¡
            for obj in self.objects:
                # æ‡‰ç”¨é‡åŠ›
                obj.apply_force((self.gravity[0] * obj.mass, self.gravity[1] * obj.mass))
                obj.update(dt)
            
            # æª¢æŸ¥å’Œè§£æ±ºç¢°æ’
            for i in range(len(self.objects)):
                for j in range(i + 1, len(self.objects)):
                    if self.objects[i].check_collision(self.objects[j]):
                        self.objects[i].resolve_collision(self.objects[j])
            
        except Exception as e:
            print(f"Error updating physics world: {e}")

# ä½¿ç”¨ç¤ºä¾‹
def main():
    # å‰µå»ºéŠæˆ²çª—å£
    pygame.init()
    screen = pygame.display.set_mode((800, 600))
    pygame.display.set_caption("Physics Demo")
    clock = pygame.time.Clock()
    
    try:
        # å‰µå»ºç‰©ç†ä¸–ç•Œ
        world = PhysicsWorld()
        
        # å‰µå»ºç‰©ç†å°è±¡
        obj1 = PhysicsObject((100, 100), (0, 0), mass=1.0)
        obj2 = PhysicsObject((200, 200), (0, 0), mass=2.0)
        
        # æ·»åŠ å°è±¡
        world.add_object(obj1)
        world.add_object(obj2)
        
        # éŠæˆ²å¾ªç’°
        running = True
        while running:
            # è™•ç†äº‹ä»¶
            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    running = False
                elif event.type == pygame.KEYDOWN:
                    if event.key == pygame.K_ESCAPE:
                        running = False
            
            # æ¸…ç©ºå±å¹•
            screen.fill((0, 0, 0))
            
            # æ›´æ–°ç‰©ç†ä¸–ç•Œ
            world.update(1/60)  # å‡è¨­60FPS
            
            # ç¹ªè£½å°è±¡
            for obj in world.objects:
                pygame.draw.circle(screen, (255, 0, 0), 
                                 (int(obj.position[0]), int(obj.position[1])), 25)
            
            # æ›´æ–°é¡¯ç¤º
            pygame.display.flip()
            
            # æ§åˆ¶å¹€ç‡
            clock.tick(60)
        
        # é€€å‡ºéŠæˆ²
        pygame.quit()
        sys.exit()
    
    except Exception as e:
        print(f"Error in main: {e}")
        pygame.quit()
        sys.exit()

if __name__ == '__main__':
    main()
```

### 2. éŠæˆ²éŸ³æ•ˆ

```python
import pygame
import sys
import os
from typing import Tuple, List, Optional, Dict
import time
import math

class SoundManager:
    def __init__(self):
        """åˆå§‹åŒ–éŸ³æ•ˆç®¡ç†å™¨"""
        try:
            # åˆå§‹åŒ–PygameéŸ³é »
            pygame.mixer.init()
            
            # è¨­ç½®éŸ³é‡
            self.master_volume = 1.0
            self.sound_volume = 1.0
            self.music_volume = 1.0
            
            # åŠ è¼‰éŸ³æ•ˆ
            self.sounds = {}
            self.music = {}
            
            print("Sound manager initialized")
            
        except Exception as e:
            print(f"Error initializing sound manager: {e}")
    
    def load_sound(self, name: str, file_path: str):
        """åŠ è¼‰éŸ³æ•ˆ"""
        try:
            if name not in self.sounds:
                self.sounds[name] = pygame.mixer.Sound(file_path)
                print(f"Sound loaded: {name}")
            
        except Exception as e:
            print(f"Error loading sound: {e}")
    
    def load_music(self, name: str, file_path: str):
        """åŠ è¼‰éŸ³æ¨‚"""
        try:
            if name not in self.music:
                self.music[name] = file_path
                print(f"Music loaded: {name}")
            
        except Exception as e:
            print(f"Error loading music: {e}")
    
    def play_sound(self, name: str, volume: float = 1.0):
        """æ’­æ”¾éŸ³æ•ˆ"""
        try:
            if name in self.sounds:
                self.sounds[name].set_volume(volume * self.sound_volume * self.master_volume)
                self.sounds[name].play()
                print(f"Playing sound: {name}")
            
        except Exception as e:
            print(f"Error playing sound: {e}")
    
    def play_music(self, name: str, volume: float = 1.0, loop: bool = True):
        """æ’­æ”¾éŸ³æ¨‚"""
        try:
            if name in self.music:
                pygame.mixer.music.load(self.music[name])
                pygame.mixer.music.set_volume(volume * self.music_volume * self.master_volume)
                pygame.mixer.music.play(-1 if loop else 0)
                print(f"Playing music: {name}")
            
        except Exception as e:
            print(f"Error playing music: {e}")
    
    def stop_music(self):
        """åœæ­¢éŸ³æ¨‚"""
        try:
            pygame.mixer.music.stop()
            print("Music stopped")
            
        except Exception as e:
            print(f"Error stopping music: {e}")
    
    def set_master_volume(self, volume: float):
        """è¨­ç½®ä¸»éŸ³é‡"""
        try:
            self.master_volume = max(0.0, min(1.0, volume))
            pygame.mixer.music.set_volume(self.music_volume * self.master_volume)
            print(f"Master volume set to: {self.master_volume}")
            
        except Exception as e:
            print(f"Error setting master volume: {e}")
    
    def set_sound_volume(self, volume: float):
        """è¨­ç½®éŸ³æ•ˆéŸ³é‡"""
        try:
            self.sound_volume = max(0.0, min(1.0, volume))
            print(f"Sound volume set to: {self.sound_volume}")
            
        except Exception as e:
            print(f"Error setting sound volume: {e}")
    
    def set_music_volume(self, volume: float):
        """è¨­ç½®éŸ³æ¨‚éŸ³é‡"""
        try:
            self.music_volume = max(0.0, min(1.0, volume))
            pygame.mixer.music.set_volume(self.music_volume * self.master_volume)
            print(f"Music volume set to: {self.music_volume}")
            
        except Exception as e:
            print(f"Error setting music volume: {e}")

# ä½¿ç”¨ç¤ºä¾‹
def main():
    # å‰µå»ºéŠæˆ²çª—å£
    pygame.init()
    screen = pygame.display.set_mode((800, 600))
    pygame.display.set_caption("Sound Demo")
    clock = pygame.time.Clock()
    
    try:
        # å‰µå»ºéŸ³æ•ˆç®¡ç†å™¨
        sound_manager = SoundManager()
        
        # åŠ è¼‰éŸ³æ•ˆå’ŒéŸ³æ¨‚
        sound_manager.load_sound("jump", "jump.wav")
        sound_manager.load_sound("coin", "coin.wav")
        sound_manager.load_music("background", "background.mp3")
        
        # æ’­æ”¾èƒŒæ™¯éŸ³æ¨‚
        sound_manager.play_music("background")
        
        # éŠæˆ²å¾ªç’°
        running = True
        while running:
            # è™•ç†äº‹ä»¶
            for event in pygame.event.get():
                if event.type == pygame.QUIT:
                    running = False
                elif event.type == pygame.KEYDOWN:
                    if event.key == pygame.K_ESCAPE:
                        running = False
                    elif event.key == pygame.K_SPACE:
                        sound_manager.play_sound("jump")
                    elif event.key == pygame.K_c:
                        sound_manager.play_sound("coin")
                    elif event.key == pygame.K_UP:
                        sound_manager.set_master_volume(sound_manager.master_volume + 0.1)
                    elif event.key == pygame.K_DOWN:
                        sound_manager.set_master_volume(sound_manager.master_volume - 0.1)
            
            # æ¸…ç©ºå±å¹•
            screen.fill((0, 0, 0))
            
            # ç¹ªè£½éŸ³é‡æŒ‡ç¤ºå™¨
            pygame.draw.rect(screen, (255, 255, 255), 
                           (10, 10, 200 * sound_manager.master_volume, 20))
            
            # æ›´æ–°é¡¯ç¤º
            pygame.display.flip()
            
            # æ§åˆ¶å¹€ç‡
            clock.tick(60)
        
        # åœæ­¢éŸ³æ¨‚
        sound_manager.stop_music()
        
        # é€€å‡ºéŠæˆ²
        pygame.quit()
        sys.exit()
    
    except Exception as e:
        print(f"Error in main: {e}")
        pygame.quit()
        sys.exit()

if __name__ == '__main__':
    main()
```

## ç·´ç¿’é¡Œ

1. **éŠæˆ²ç‰©ç†**
   é–‹ç™¼éŠæˆ²ç‰©ç†ï¼š
   - ç‰©ç†å¼•æ“
   - ç¢°æ’æª¢æ¸¬
   - ç‰©ç†æ¨¡æ“¬
   - å„ªåŒ–æ€§èƒ½

2. **éŠæˆ²éŸ³æ•ˆ**
   å‰µå»ºéŠæˆ²éŸ³æ•ˆï¼š
   - éŸ³æ•ˆç®¡ç†
   - éŸ³æ¨‚æ§åˆ¶
   - éŸ³é‡èª¿ç¯€
   - å„ªåŒ–æ€§èƒ½

3. **éŠæˆ²é–‹ç™¼**
   å¯¦ç¾éŠæˆ²é–‹ç™¼ï¼š
   - ç‰©ç†ç³»çµ±
   - éŸ³æ•ˆç³»çµ±
   - å„ªåŒ–æ€§èƒ½
   - è™•ç†ç•°å¸¸

## å°æé†’ ğŸ’¡

1. éŠæˆ²ç‰©ç†
   - é¸æ“‡åˆé©æ–¹æ³•
   - å„ªåŒ–åƒæ•¸
   - è™•ç†ç•°å¸¸
   - æä¾›ç›£æ§

2. éŠæˆ²éŸ³æ•ˆ
   - é¸æ“‡åˆé©æ–¹æ³•
   - å„ªåŒ–æ€§èƒ½
   - è™•ç†ç•°å¸¸
   - æä¾›çµæœ

3. éŠæˆ²é–‹ç™¼
   - é¸æ“‡åˆé©ç®—æ³•
   - å„ªåŒ–æ€§èƒ½
   - è™•ç†ç•°å¸¸
   - æä¾›ç›£æ§

4. èª¿è©¦æŠ€å·§
   - ä½¿ç”¨é–‹ç™¼å·¥å…·
   - åˆ†ææ€§èƒ½
   - å„ªåŒ–é—œéµè·¯å¾‘
   - ç›£æ§è™•ç†ç‹€æ…‹

[ä¸Šä¸€ç« ï¼šéŠæˆ²é–‹ç™¼åŸºç¤](106_éŠæˆ²é–‹ç™¼åŸºç¤.md) | [ä¸‹ä¸€ç« ï¼šç¶²çµ¡ç·¨ç¨‹åŸºç¤](108_ç¶²çµ¡ç·¨ç¨‹åŸºç¤.md) 